define("js/FileFormats/XML", [ "jquery"], function() {

    /**
     * Base class of all XML loaders
     */
    class XML {
        /**
         * @param {String} tag XML tag for this loader e.g. "svg"
         */
        constructor(tag) {
            super();
            this.mTag = tag;
        }

        // @Override FileFormat
        load(source, data) {
            super.load(source, data);
            if (!/^<\?xml/i.test(data))
                throw new Error("XML expected");
            
            let dom = $.parseXML(data);
            this.m$xml = $(dom).find(tag);
            if (!this.m$xml)
                throw new Error(source + " has no <" + tag);
        }

        /**
         * @return the XML DOM
         */
        get $xml() {
            return this.m$xml;
        }
    }
    
    return XML;
});
